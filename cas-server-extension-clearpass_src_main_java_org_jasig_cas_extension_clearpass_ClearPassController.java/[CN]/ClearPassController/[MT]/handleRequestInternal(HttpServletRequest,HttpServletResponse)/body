{
  final String userName=request.getRemoteUser();
  LOGGER.debug("Handling clearPass request for user [{}]",userName);
  if (StringUtils.isBlank(userName)) {
    return returnError("No username was provided to clearPass.");
  }
  if (!this.credentialsCache.containsKey(userName)) {
    return returnError("Password could not be found in cache for user " + userName);
  }
  final String password=this.credentialsCache.get(userName);
  if (StringUtils.isBlank(password)) {
    return returnError("Password is null or blank");
  }
  LOGGER.debug("Retrieved credentials will be provided to the requesting service.");
  return new ModelAndView(this.successView,MODEL_CLEARPASS,password);
}
