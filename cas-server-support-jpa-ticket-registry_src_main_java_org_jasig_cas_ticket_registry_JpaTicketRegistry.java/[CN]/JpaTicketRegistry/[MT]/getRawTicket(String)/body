{
  try {
    if (ticketId.startsWith(TicketGrantingTicket.PREFIX) || ticketId.startsWith(ProxyGrantingTicket.PROXY_GRANTING_TICKET_PREFIX)) {
      return entityManager.find(TicketGrantingTicketImpl.class,ticketId,LockModeType.PESSIMISTIC_WRITE);
    }
    return entityManager.find(ServiceTicketImpl.class,ticketId);
  }
 catch (  final Exception e) {
    logger.error("Error getting ticket {} from registry.",ticketId,e);
  }
  return null;
}
