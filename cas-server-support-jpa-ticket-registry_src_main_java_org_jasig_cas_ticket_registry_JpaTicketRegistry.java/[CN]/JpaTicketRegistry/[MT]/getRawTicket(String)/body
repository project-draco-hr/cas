{
  try {
    for (    final String prefix : this.ticketGrantingTicketPrefixes) {
      if (ticketId.startsWith(prefix)) {
        return entityManager.find(TicketGrantingTicketImpl.class,ticketId);
      }
    }
    return entityManager.find(ServiceTicketImpl.class,ticketId);
  }
 catch (  final Exception e) {
    logger.error("Error getting ticket {} from registry.",ticketId,e);
  }
  return null;
}
