{
  final CacheCredentialsMetaDataPopulator populator=new CacheCredentialsMetaDataPopulator(this.publicKey);
  final UsernamePasswordCredential c=TestUtils.getCredentialsWithSameUsernameAndPassword();
  final AuthenticationBuilder builder=AuthenticationBuilder.newInstance(TestUtils.getAuthentication());
  populator.populateAttributes(builder,c);
  final Authentication authn=builder.build();
  final String psw=(String)authn.getAttributes().get(UsernamePasswordCredential.AUTHENTICATION_ATTRIBUTE_PASSWORD);
  final String decryptedPsw=decryptCredential(psw);
  assertTrue(c.getPassword().equals(decryptedPsw));
}
