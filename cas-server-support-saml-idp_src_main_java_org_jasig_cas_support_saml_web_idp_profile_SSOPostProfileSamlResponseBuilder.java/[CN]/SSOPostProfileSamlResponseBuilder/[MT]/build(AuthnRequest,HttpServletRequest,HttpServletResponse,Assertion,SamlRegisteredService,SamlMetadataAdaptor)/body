{
  final List<Statement> statements=new ArrayList<>();
  statements.add(buildAuthnStatement(assertion,authnRequest));
  final AttributeStatement attributeStatement=buildAttributeStatement(assertion,authnRequest);
  if (attributeStatement != null) {
    statements.add(attributeStatement);
  }
  final Response finalResponse=buildResponse(authnRequest,statements,assertion,service,adaptor);
  return finalResponse;
}
