{
  final UsernamePasswordCredential userPass=(UsernamePasswordCredential)credential;
  if (userPass.getUsername() == null) {
    throw new AccountNotFoundException();
  }
  final String transformedUsername=this.principalNameTransformer.transform(userPass.getUsername());
  if (transformedUsername == null) {
    throw new AccountNotFoundException();
  }
  final Principal principal=authenticateUsernamePasswordInternal(transformedUsername,userPass.getPassword());
  return new HandlerResult(this,new BasicCredentialMetaData(credential),principal);
}
