{
  final UsernamePasswordCredential userPass=(UsernamePasswordCredential)credential;
  if (userPass.getUsername() == null) {
    throw new AccountNotFoundException("Username is null.");
  }
  final String transformedUsername=this.principalNameTransformer.transform(userPass.getUsername());
  if (transformedUsername == null) {
    throw new AccountNotFoundException("Transformed username is null.");
  }
  final UsernamePasswordCredential transformedUpc=new UsernamePasswordCredential(transformedUsername,userPass.getPassword());
  return authenticateUsernamePasswordInternal(transformedUpc);
}
