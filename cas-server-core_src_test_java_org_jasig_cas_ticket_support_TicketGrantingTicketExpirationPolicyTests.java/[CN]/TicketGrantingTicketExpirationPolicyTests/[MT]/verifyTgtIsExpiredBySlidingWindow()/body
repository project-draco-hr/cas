{
  ticketGrantingTicket.grantServiceTicket("test",TestUtils.getService(),expirationPolicy,false,TestUtils.getDefaultRegisteredService());
  Thread.sleep(SLIDING_TIMEOUT - TIMEOUT_BUFFER);
  assertFalse(ticketGrantingTicket.isExpired());
  ticketGrantingTicket.grantServiceTicket("test",TestUtils.getService(),expirationPolicy,false,TestUtils.getDefaultRegisteredService());
  Thread.sleep(SLIDING_TIMEOUT - TIMEOUT_BUFFER);
  assertFalse(ticketGrantingTicket.isExpired());
  ticketGrantingTicket.grantServiceTicket("test",TestUtils.getService(),expirationPolicy,false,TestUtils.getDefaultRegisteredService());
  Thread.sleep(SLIDING_TIMEOUT + TIMEOUT_BUFFER);
  assertTrue(ticketGrantingTicket.isExpired());
}
