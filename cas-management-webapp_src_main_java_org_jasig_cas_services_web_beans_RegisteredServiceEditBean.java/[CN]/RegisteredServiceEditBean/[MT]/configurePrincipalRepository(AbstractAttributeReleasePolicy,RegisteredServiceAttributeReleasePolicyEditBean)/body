{
  final PrincipalAttributesRepository pr=attrPolicy.getPrincipalAttributesRepository();
  if (pr instanceof DefaultPrincipalAttributesRepository) {
    attrPolicyBean.setAttrOption(RegisteredServiceAttributeReleasePolicyEditBean.Types.DEFAULT.toString());
  }
 else {
    if (pr instanceof CachingPrincipalAttributesRepository) {
      attrPolicyBean.setAttrOption(RegisteredServiceAttributeReleasePolicyEditBean.Types.CACHED.toString());
      final CachingPrincipalAttributesRepository cc=(CachingPrincipalAttributesRepository)pr;
      final Duration duration=cc.getDuration();
      attrPolicyBean.setCachedExpiration(duration.getDurationAmount());
      attrPolicyBean.setCachedTimeUnit(duration.getTimeUnit().name());
    }
    if (pr instanceof GuavaCachingPrincipalAttributesRepository) {
      attrPolicyBean.setAttrOption(RegisteredServiceAttributeReleasePolicyEditBean.Types.CACHED_GUAVA.toString());
      final GuavaCachingPrincipalAttributesRepository cc=(GuavaCachingPrincipalAttributesRepository)pr;
      attrPolicyBean.setCachedExpiration(cc.getExpiration());
      attrPolicyBean.setCachedTimeUnit(cc.getTimeUnit().name());
    }
    final AbstractPrincipalAttributesRepository cc=(AbstractPrincipalAttributesRepository)pr;
    final IAttributeMerger merger=cc.getMergingStrategy();
    if (merger != null) {
      if (merger instanceof NoncollidingAttributeAdder) {
        attrPolicyBean.setMergingStrategy(RegisteredServiceAttributeReleasePolicyEditBean.AttributeMergerTypes.ADD.toString());
      }
 else       if (merger instanceof MultivaluedAttributeMerger) {
        attrPolicyBean.setMergingStrategy(RegisteredServiceAttributeReleasePolicyEditBean.AttributeMergerTypes.MULTIVALUED.toString());
      }
 else       if (merger instanceof ReplacingAttributeAdder) {
        attrPolicyBean.setMergingStrategy(RegisteredServiceAttributeReleasePolicyEditBean.AttributeMergerTypes.REPLACE.toString());
      }
    }
  }
}
