{
  final String proxyType=this.proxyPolicy.getType();
  if (StringUtils.equalsIgnoreCase(proxyType,RegisteredServiceProxyPolicyBean.Types.REFUSE.toString())) {
    regSvc.setProxyPolicy(new RefuseRegisteredServiceProxyPolicy());
  }
 else   if (StringUtils.equalsIgnoreCase(proxyType,RegisteredServiceProxyPolicyBean.Types.REGEX.toString())) {
    final String value=this.proxyPolicy.getValue();
    if (StringUtils.isNotBlank(value) && isValidRegex(value)) {
      regSvc.setProxyPolicy(new RegexMatchingRegisteredServiceProxyPolicy(value));
    }
 else {
      throw new IllegalArgumentException("Invalid regex pattern specified for proxy policy: " + value);
    }
  }
}
