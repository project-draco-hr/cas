{
  final Map<String,Service> services=ticket.getServices();
  if (services != null && !services.isEmpty()) {
    for (    final Map.Entry<String,Service> entry : services.entrySet()) {
      if (this.serviceTicketsCache.remove(entry.getKey())) {
        logger.trace("Removed service ticket [{}]",entry.getKey());
      }
 else {
        logger.trace("Unable to remove service ticket [{}]",entry.getKey());
      }
    }
  }
  return this.ticketGrantingTicketsCache.remove(ticket.getId());
}
