{
  final String id=credentials.getUsername();
  final String secret=credentials.getPassword();
  if (!validator.checkServiceValid(id)) {
    throw new CredentialsException("Service invalid for client identifier: " + id);
  }
  if (!validator.checkClientSecret(id,secret)) {
    throw new CredentialsException("Bad secret for client identifier: " + id);
  }
  final OAuthClientProfile profile=new OAuthClientProfile();
  profile.setId(id);
  credentials.setUserProfile(profile);
}
