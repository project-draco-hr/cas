{
  final CustomCredentials credentials=new CustomCredentials();
  final Map<String,String> added=new HashMap<String,String>();
  added.put(CustomCredentials.class.getName(),"FF");
  this.populator.setUserDefinedMappings(added);
  final AuthenticationBuilder builder=newAuthenticationBuilder(TestUtils.getPrincipal());
  this.populator.populateAttributes(builder,credentials);
  final Authentication auth=builder.build();
  assertEquals("FF",auth.getAttributes().get(SamlAuthenticationMetaDataPopulator.ATTRIBUTE_AUTHENTICATION_METHOD));
}
