{
  final String decoded=cipherExecutor.decode(encodedObject.toString());
  try (final ByteArrayInputStream in=new ByteArrayInputStream(decoded.getBytes(Charset.forName(UTF8_ENCODING)));final ObjectInputStream inStream=new ObjectInputStream(in)){
    final Object obj=inStream.readObject();
    if (obj == null) {
      throw new RuntimeException("Can not decode encoded object " + encodedObject);
    }
    if (!clazz.isAssignableFrom(obj.getClass())) {
      throw new ClassCastException("Decoded object is of type " + obj.getClass() + " when we were expecting "+ clazz);
    }
    return (T)obj;
  }
 catch (  final Exception e) {
    throw new RuntimeException(e.getMessage(),e);
  }
}
