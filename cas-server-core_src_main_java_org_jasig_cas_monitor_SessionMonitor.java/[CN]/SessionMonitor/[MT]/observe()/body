{
  try {
    final int sessionCount=registryState.sessionCount();
    final int ticketCount=registryState.serviceTicketCount();
    final StringBuilder msg=new StringBuilder();
    StatusCode code=StatusCode.OK;
    if (sessionCountWarnThreshold > -1 && sessionCount > sessionCountWarnThreshold) {
      code=StatusCode.WARN;
      msg.append(String.format("Session count (%s) is above threshold %s. ",sessionCount,sessionCountWarnThreshold));
    }
 else {
      msg.append(sessionCount).append(" sessions. ");
    }
    if (serviceTicketCountWarnThreshold > -1 && ticketCount > serviceTicketCountWarnThreshold) {
      code=StatusCode.WARN;
      msg.append(String.format("Service ticket count (%s) is above threshold %s.",ticketCount,serviceTicketCountWarnThreshold));
    }
 else {
      msg.append(ticketCount).append(" service tickets.");
    }
    return new SessionStatus(code,msg.toString(),sessionCount,ticketCount);
  }
 catch (  final Exception e) {
    return new SessionStatus(StatusCode.ERROR,e.getMessage());
  }
}
