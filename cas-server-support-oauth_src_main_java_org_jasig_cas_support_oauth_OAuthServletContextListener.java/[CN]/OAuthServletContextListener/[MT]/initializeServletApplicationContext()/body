{
  addControllerToCasServletHandlerMapping(OAuthConstants.ENDPOINT_OAUTH2,"oauth20WrapperController");
  final ServicesManager servicesManager=getServicesManager();
  final Service callbackService=webApplicationServiceFactory.createService(this.callbackAuthorizeUrl);
  if (!servicesManager.matchesExistingService(callbackService)) {
    final OAuthCallbackAuthorizeService service=new OAuthCallbackAuthorizeService();
    service.setId(new SecureRandom().nextLong());
    service.setName(service.getClass().getSimpleName());
    service.setDescription("OAuth Wrapper Callback Url");
    service.setServiceId(this.callbackAuthorizeUrl);
    addRegisteredServiceToServicesManager(service);
  }
}
