{
  final IPersonAttributes personAttributes=this.attributeRepository.getPerson(id);
  if (personAttributes == null) {
    logger.debug("Could not find principal [{}] in the repository so no attributes are returned.",id);
    return Collections.emptyMap();
  }
  final Map<String,List<Object>> attributes=personAttributes.getAttributes();
  if (attributes == null) {
    logger.debug("Principal [{}] has no attributes and so none are returned.",id);
    return Collections.emptyMap();
  }
  return attributes;
}
