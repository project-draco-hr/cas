{
  final Map<String,List<Object>> convertedAttributes=new HashMap<>(p.getAttributes().size());
  final Map<String,Object> principalAttributes=p.getAttributes();
  for (  final Map.Entry<String,Object> entry : principalAttributes.entrySet()) {
    final Object values=entry.getValue();
    final String key=entry.getKey();
    if (values instanceof List) {
      convertedAttributes.put(key,(List)values);
    }
 else {
      convertedAttributes.put(key,Collections.singletonList(values));
    }
  }
  return convertedAttributes;
}
