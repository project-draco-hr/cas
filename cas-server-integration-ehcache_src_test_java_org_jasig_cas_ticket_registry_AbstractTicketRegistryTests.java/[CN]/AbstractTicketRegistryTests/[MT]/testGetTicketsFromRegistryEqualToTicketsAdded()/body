{
  final Collection<Ticket> tickets=new ArrayList<Ticket>();
  for (int i=0; i < TICKETS_IN_REGISTRY; i++) {
    final TicketGrantingTicket ticketGrantingTicket=new TicketGrantingTicketImpl("TEST" + i,getAuthentication(),new NeverExpiresExpirationPolicy());
    final ServiceTicket st=ticketGrantingTicket.grantServiceTicket("tests" + i,getService(),new NeverExpiresExpirationPolicy(),false);
    tickets.add(ticketGrantingTicket);
    tickets.add(st);
    this.ticketRegistry.addTicket(ticketGrantingTicket);
    this.ticketRegistry.addTicket(st);
  }
  try {
    Collection<Ticket> ticketRegistryTickets=this.ticketRegistry.getTickets();
    assertEquals("The size of the registry is not the same as the collection.",ticketRegistryTickets.size(),tickets.size());
    for (    final Ticket ticket : tickets) {
      if (!ticketRegistryTickets.contains(ticket)) {
        fail("Ticket was added to registry but was not found in retrieval of collection of all tickets.");
      }
    }
  }
 catch (  Exception e) {
    fail("Caught an exception. But no exception should have been thrown.");
  }
}
