{
  final IgniteConfiguration config=new IgniteConfiguration();
  final TcpDiscoverySpi spi=new TcpDiscoverySpi();
  final TcpDiscoveryVmIpFinder finder=new TcpDiscoveryVmIpFinder();
  finder.setAddresses(StringUtils.commaDelimitedListToSet(this.igniteAddresses));
  spi.setIpFinder(finder);
  config.setDiscoverySpi(spi);
  final List<CacheConfiguration> configurations=new ArrayList<>();
  final CacheConfiguration servicesCache=new CacheConfiguration();
  servicesCache.setName(this.stCacheName);
  servicesCache.setCacheMode(this.stCacheMode);
  servicesCache.setAtomicityMode(this.stAtomicityMode);
  servicesCache.setWriteSynchronizationMode(this.stWriteSynchronizationMode);
  final CacheConfiguration ticketsCache=new CacheConfiguration();
  ticketsCache.setName(this.tgtCacheName);
  ticketsCache.setCacheMode(this.tgtCacheMode);
  ticketsCache.setAtomicityMode(this.tgtAtomicityMode);
  ticketsCache.setWriteSynchronizationMode(this.tgtWriteSynchronizationMode);
  configurations.add(servicesCache);
  configurations.add(ticketsCache);
  config.setCacheConfiguration(configurations.toArray(new CacheConfiguration[]{}));
  return config;
}
