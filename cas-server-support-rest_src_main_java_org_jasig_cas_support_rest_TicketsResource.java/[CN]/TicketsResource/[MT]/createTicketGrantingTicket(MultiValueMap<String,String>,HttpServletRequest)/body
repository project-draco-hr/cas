{
  try (Formatter fmt=new Formatter()){
    final TicketGrantingTicket tgtId=this.cas.createTicketGrantingTicket(obtainCredential(requestBody));
    final URI ticketReference=new URI(request.getRequestURL().toString() + '/' + tgtId.getId());
    final HttpHeaders headers=new HttpHeaders();
    headers.setLocation(ticketReference);
    headers.setContentType(MediaType.TEXT_HTML);
    fmt.format("<!DOCTYPE HTML PUBLIC \\\"-//IETF//DTD HTML 2.0//EN\\\"><html><head><title>");
    fmt.format("%s %s",HttpStatus.CREATED,HttpStatus.CREATED.getReasonPhrase()).format("</title></head><body><h1>TGT Created</h1><form action=\"%s",ticketReference.toString()).format("\" method=\"POST\">Service:<input type=\"text\" name=\"service\" value=\"\">").format("<br><input type=\"submit\" value=\"Submit\"></form></body></html>");
    return new ResponseEntity<>(fmt.toString(),headers,HttpStatus.CREATED);
  }
 catch (  final Throwable e) {
    LOGGER.error(e.getMessage(),e);
    return new ResponseEntity<>(e.getMessage(),HttpStatus.BAD_REQUEST);
  }
}
