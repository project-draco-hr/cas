{
  try {
    String url=this.duoApiHost.concat("/rest/v1/ping");
    if (!url.startsWith("http://")) {
      url="http://" + url;
    }
    final HttpMessage msg=this.httpClient.sendMessageToEndPoint(new URL(url));
    if (msg != null) {
      logger.debug("Received Duo ping response {}",msg.getMessage());
      final ObjectMapper mapper=new ObjectMapper();
      final String response=URLDecoder.decode(msg.getMessage(),"UTF-8");
      final JsonNode result=mapper.readTree(response);
      if (result.has("response") && result.has("stat") && result.get("response").asText().equalsIgnoreCase("pong")&& result.get("stat").asText().equalsIgnoreCase("OK")) {
        return true;
      }
 else {
        logger.warn("Could not reach/ping Duo. Response returned is {}",result);
      }
    }
  }
 catch (  final Exception e) {
    logger.warn("Pinging Duo has failed with error: {}",e.getMessage(),e);
  }
  return false;
}
