{
  final Set<Credential> sanitizedCredentials=sanitizeCredentials(credentials);
  if (sanitizedCredentials.size() > 0) {
    final Authentication authentication=this.authenticationManager.authenticate(credentials);
    final TicketGrantingTicket ticketGrantingTicket=new TicketGrantingTicketImpl(this.ticketGrantingTicketUniqueTicketIdGenerator.getNewTicketId(TicketGrantingTicket.PREFIX),authentication,this.ticketGrantingTicketExpirationPolicy);
    this.ticketRegistry.addTicket(ticketGrantingTicket);
    return ticketGrantingTicket;
  }
  logger.warn("No credentials were specified in the request for creating a new ticket-granting ticket");
  throw new TicketCreationException();
}
