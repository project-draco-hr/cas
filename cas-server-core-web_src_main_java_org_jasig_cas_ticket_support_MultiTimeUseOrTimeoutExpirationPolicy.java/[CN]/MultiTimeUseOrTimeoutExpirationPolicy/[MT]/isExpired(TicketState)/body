{
  if (ticketState == null) {
    logger.debug("Ticket state is null for {}",this.getClass().getSimpleName());
    return true;
  }
  final long countUses=ticketState.getCountOfUses();
  if (countUses >= this.numberOfUses) {
    logger.debug("Ticket usage count {} is greater than or equal to {}",countUses,this.numberOfUses);
    return true;
  }
  final long systemTime=System.currentTimeMillis();
  final long lastTimeUsed=ticketState.getLastTimeUsed();
  final long difference=systemTime - lastTimeUsed;
  if (difference >= this.timeToKillInMilliSeconds) {
    logger.debug("Ticket has expired because the difference between current time [{}] " + "and ticket time [{}] is greater than or equal to [{}]",systemTime,lastTimeUsed,this.timeToKillInMilliSeconds);
    return true;
  }
  return false;
}
