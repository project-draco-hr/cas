{
  if (!this.enabled) {
    logger.info("Ticket encoding is disabled. Proceeding as usual...");
    return pjp.proceed(pjp.getArgs());
  }
  final String ticketId=(String)pjp.getArgs()[0];
  final Object[] encodedId=new Object[]{CompressionUtils.encodeObject(ticketId.getBytes(),this.cipherExecutor)};
  final Object result=pjp.proceed(encodedId);
  Ticket ticket=null;
  if (result != null) {
    logger.info("Attempting to decode [{}]",result);
    if (result instanceof EncodedTicket) {
      final EncodedTicket encodedTicket=(EncodedTicket)result;
      ticket=CompressionUtils.decodeObject(encodedTicket.getEncoded(),this.cipherExecutor,Ticket.class);
      logger.info("Decoded [{}]",ticket);
    }
 else {
      throw new IllegalArgumentException("Expected EncodedTicket but was " + result);
    }
    return ticket;
  }
  logger.info("Cannot decode ticket id [{}] because it cannot be found in the registry. " + "The ticket may have expired/removed from the registry.",pjp.getArgs());
  return null;
}
