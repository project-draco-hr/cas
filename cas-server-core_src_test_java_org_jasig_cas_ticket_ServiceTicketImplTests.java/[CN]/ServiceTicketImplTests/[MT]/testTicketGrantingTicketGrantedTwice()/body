{
  Authentication a=TestUtils.getAuthentication();
  TicketGrantingTicket t=new TicketGrantingTicketImpl("test",TestUtils.getAuthentication(),new NeverExpiresExpirationPolicy());
  ServiceTicket s=t.grantServiceTicket(this.uniqueTicketIdGenerator.getNewTicketId(ServiceTicket.PREFIX),TestUtils.getService(),new MultiTimeUseOrTimeoutExpirationPolicy(1,5000),false);
  s.grantTicketGrantingTicket(this.uniqueTicketIdGenerator.getNewTicketId(TicketGrantingTicket.PREFIX),a,new NeverExpiresExpirationPolicy());
  try {
    s.grantTicketGrantingTicket(this.uniqueTicketIdGenerator.getNewTicketId(TicketGrantingTicket.PREFIX),a,new NeverExpiresExpirationPolicy());
    fail("Exception expected.");
  }
 catch (  final Exception e) {
    return;
  }
}
