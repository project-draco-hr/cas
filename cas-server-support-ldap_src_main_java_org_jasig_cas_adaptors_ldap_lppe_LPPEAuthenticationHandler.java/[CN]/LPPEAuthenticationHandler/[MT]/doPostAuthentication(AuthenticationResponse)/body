{
  if (!configuration.build(response.getLdapEntry())) {
    if (configuration.isCritical()) {
      throw new FailedLoginException("LPPE authentication failed. Configuration cannot be determined.");
    }
 else {
      log.warn("LPPE configuration cannot be determined.");
      return;
    }
  }
  try {
    this.examineAccountStatus(response);
    this.validateAccountPasswordExpirationPolicy();
  }
 catch (  final LoginException e) {
    if (configuration.isCritical()) {
      throw e;
    }
 else {
      log.warn("LPPE authentication failed. Skipped policy checks.");
    }
  }
}
