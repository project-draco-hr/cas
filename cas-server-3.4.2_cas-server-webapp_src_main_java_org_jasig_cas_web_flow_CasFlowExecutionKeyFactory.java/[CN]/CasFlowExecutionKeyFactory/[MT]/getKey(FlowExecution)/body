{
  if (this.defaultBehavior) {
    return super.getKey(execution);
  }
  CasFlowExecutionKey key=(CasFlowExecutionKey)execution.getKey();
  if (key == null) {
    final Conversation conversation=this.conversationManager.beginConversation(createConversationParameters(execution));
    final ConversationId executionId=conversation.getId();
    key=newKey(conversation,executionId);
  }
 else {
    if (getAlwaysGenerateNewNextKey()) {
      final Serializable executionId=key.getExecutionId();
      key=newKey(getConversation(executionId),executionId);
    }
  }
  return key;
}
