{
  try {
    final List<MetadataResolver> resolvers=new ArrayList<>();
    final Element metadataRoot=document.getDocumentElement();
    final DOMMetadataResolver metadataProvider=new DOMMetadataResolver(metadataRoot);
    metadataProvider.setParserPool(configBean.getParserPool());
    metadataProvider.setFailFastInitialization(this.failFastInitialization);
    metadataProvider.setRequireValidMetadata(this.requireValidMetadata);
    metadataProvider.setId(metadataProvider.getClass().getCanonicalName());
    buildMetadataFilters(service,metadataProvider);
    LOGGER.info("Initializing metadata resolver from [{}]",service.getMetadataLocation());
    metadataProvider.initialize();
    LOGGER.info("Initialized metadata resolver from [{}]",service.getMetadataLocation());
    resolvers.add(metadataProvider);
    return resolvers;
  }
 catch (  final ComponentInitializationException ex) {
    throw new RuntimeException("Could not initialize metadata resolver. Resource will be ignored",ex);
  }
}
