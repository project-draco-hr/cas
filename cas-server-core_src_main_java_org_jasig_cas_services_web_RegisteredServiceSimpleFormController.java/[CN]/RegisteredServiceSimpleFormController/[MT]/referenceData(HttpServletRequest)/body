{
  final Map<String,Object> model=new HashMap<String,Object>();
  final List<String> possibleAttributeNames=new ArrayList<String>();
  possibleAttributeNames.addAll(this.personAttributeDao.getPossibleUserAttributeNames());
  Collections.sort(possibleAttributeNames);
  model.put("availableAttributes",possibleAttributeNames);
  final List<String> possibleUsernameAttributeNames=new ArrayList<String>();
  possibleUsernameAttributeNames.addAll(possibleAttributeNames);
  possibleUsernameAttributeNames.add(RegisteredService.DEFAULT_OPAQUE_USERNAME_ATTRIBUTE);
  possibleUsernameAttributeNames.add(RegisteredService.DEFAULT_USERNAME_ATTRIBUTE);
  Collections.sort(possibleUsernameAttributeNames);
  model.put("availableUsernameAttributes",possibleUsernameAttributeNames);
  model.put("pageTitle",getFormView());
  model.put("commandName",getCommandName());
  return model;
}
