{
  final Map<String,Object> model=new HashMap<String,Object>();
  final List<String> possibleAttributeNames=new ArrayList<String>();
  possibleAttributeNames.addAll(this.personAttributeDao.getPossibleUserAttributeNames());
  Collections.sort(possibleAttributeNames);
  model.put("availableAttributes",possibleAttributeNames);
  final List<String> availableUsernameAttributes=new ArrayList<String>(possibleAttributeNames);
  availableUsernameAttributes.add(0,RegisteredService.DEFAULT_USERNAME_ATTRIBUTE);
  model.put("availableUsernameAttributes",availableUsernameAttributes);
  model.put("pageTitle",getFormView());
  model.put("commandName",getCommandName());
  return model;
}
