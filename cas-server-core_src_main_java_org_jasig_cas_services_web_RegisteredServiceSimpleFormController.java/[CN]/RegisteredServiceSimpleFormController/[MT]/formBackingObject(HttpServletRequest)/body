{
  final String id=request.getParameter("id");
  if (!StringUtils.hasText(id)) {
    logger.debug("Created new service.");
    if (this.getCommandClass() == null) {
      return new RegisteredServiceImpl();
    }
    return this.createCommand();
  }
  final RegisteredService service=this.servicesManager.findServiceBy(Long.parseLong(id));
  if (service != null) {
    logger.debug("Loaded service " + service.getServiceId());
  }
 else {
    logger.debug("Invalid service id specified.");
  }
  return service;
}
