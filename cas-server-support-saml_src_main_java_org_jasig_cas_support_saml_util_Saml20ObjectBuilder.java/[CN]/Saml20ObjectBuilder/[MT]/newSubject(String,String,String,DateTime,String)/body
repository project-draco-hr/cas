{
  final NameID nameId=newSamlObject(NameID.class);
  nameId.setFormat(nameIdFormat);
  nameId.setValue(nameIdValue);
  final SubjectConfirmation confirmation=newSamlObject(SubjectConfirmation.class);
  confirmation.setMethod(SubjectConfirmation.METHOD_BEARER);
  final SubjectConfirmationData data=newSamlObject(SubjectConfirmationData.class);
  data.setRecipient(recipient);
  data.setNotOnOrAfter(notOnOrAfter);
  data.setInResponseTo(inResponseTo);
  confirmation.setSubjectConfirmationData(data);
  final Subject subject=newSamlObject(Subject.class);
  subject.setNameID(nameId);
  subject.getSubjectConfirmations().add(confirmation);
  return subject;
}
