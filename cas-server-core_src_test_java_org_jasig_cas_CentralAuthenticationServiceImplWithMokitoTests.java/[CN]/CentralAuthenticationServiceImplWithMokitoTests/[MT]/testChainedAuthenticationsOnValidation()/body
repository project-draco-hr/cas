{
  final Service svc=TestUtils.getService(SVC2_ID);
  final String st=this.cas.grantServiceTicket(TGT2_ID,svc);
  assertNotNull(st);
  final Assertion assertion=this.cas.validateServiceTicket(st,svc);
  assertNotNull(assertion);
  assertEquals(assertion.getService(),svc);
  assertEquals(assertion.getPrimaryAuthentication().getPrincipal().getId(),PRINCIPAL);
  assertTrue(assertion.getChainedAuthentications().size() == 2);
  for (int i=0; i < assertion.getChainedAuthentications().size(); i++) {
    final Authentication auth=assertion.getChainedAuthentications().get(i);
    assertEquals(auth.getAuthenticatedDate(),authentication.getAuthenticatedDate());
    assertEquals(auth.getPrincipal(),auth.getPrincipal());
    assertEquals(auth.getAttributes(),auth.getAttributes());
    assertEquals(auth.getCredentials(),auth.getCredentials());
    assertEquals(auth.getSuccesses(),auth.getSuccesses());
  }
}
