{
  this.serviceValidateController.setProxyHandler(new Cas10ProxyHandler());
  final String tId=getCentralAuthenticationService().createTicketGrantingTicket(TestUtils.getCredentialsWithSameUsernameAndPassword());
  final String sId=getCentralAuthenticationService().grantServiceTicket(tId,TestUtils.getService());
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.addParameter("service",TestUtils.getService().getId());
  request.addParameter("ticket",sId);
  request.addParameter("pgtUrl","duh");
  final ModelAndView modelAndView=this.serviceValidateController.handleRequestInternal(request,new MockHttpServletResponse());
  assertEquals(CONST_SUCCESS_VIEW,modelAndView.getViewName());
  assertNull(modelAndView.getModel().get("pgtIou"));
}
