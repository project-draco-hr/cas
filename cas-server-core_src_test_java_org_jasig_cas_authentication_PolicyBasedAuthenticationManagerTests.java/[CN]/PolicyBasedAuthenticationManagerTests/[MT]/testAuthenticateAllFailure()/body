{
  final PolicyBasedAuthenticationManager manager=new PolicyBasedAuthenticationManager(newMockHandler(false),newMockHandler(false));
  manager.setAuthenticationPolicy(new AllAuthenticationPolicy());
  manager.authenticate(mock(Credentials.class),mock(Credentials.class));
  fail("Should have thrown AuthenticationException");
}
