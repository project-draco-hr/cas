{
  final MockHttpServletRequest request=new MockHttpServletRequest();
  final MockHttpServletResponse response=new MockHttpServletResponse();
  final MockRequestContext context=new MockRequestContext();
  request.addParameter("username","test");
  request.addParameter("password","test");
  request.addParameter("warn","true");
  request.addParameter("service","test");
  context.setExternalContext(new ServletExternalContext(new MockServletContext(),request,response));
  context.getRequestScope().put("credentials",TestUtils.getCredentialsWithSameUsernameAndPassword());
}
