{
  final String transformedUsername=getPrincipalNameTransformer().transform(credentials.getUsername());
  try {
    log.debug("Attempting authentication for: {}",transformedUsername);
    final LoginContext lc=new LoginContext(this.realm,new UsernamePasswordCallbackHandler(transformedUsername,credentials.getPassword()));
    lc.login();
    lc.logout();
  }
 catch (  final LoginException fle) {
    log.debug("Authentication failed for: {}",transformedUsername);
    return false;
  }
  log.debug("Authentication succeeded for: {}",transformedUsername);
  return true;
}
