{
  final RegisteredServiceImpl r=new RegisteredServiceImpl();
  r.setName("test");
  r.setServiceId("testId");
  r.setTheme("theme");
  r.setDescription("description");
  this.dao.save(r);
  final List<RegisteredService> services=this.dao.load();
  final RegisteredService r2=services.get(0);
  r.setId(r2.getId());
  r.setTheme("mytheme");
  r.setAllowedAttributes(Arrays.asList("Test"));
  this.dao.save(r);
  final RegisteredService r3=this.dao.findServiceById(r.getId());
  assertEquals(r,r2);
  assertEquals(r.getTheme(),r3.getTheme());
  assertTrue(r3.getAllowedAttributes().contains("Test"));
  r.setAllowedAttributes(new ArrayList<String>());
  this.dao.save(r);
  final RegisteredService r4=this.dao.findServiceById(r.getId());
  assertTrue(r4.getAllowedAttributes().isEmpty());
}
