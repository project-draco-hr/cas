{
  logger.debug("Outbound saml object to use is {}",samlObject.getClass().getName());
  outboundContext.setMessage(samlObject);
  final List<AssertionConsumerService> assertionConsumerServices=adaptor.getAssertionConsumerServices();
  final SAMLPeerEntityContext peerEntityContext=outboundContext.getSubcontext(SAMLPeerEntityContext.class,true);
  if (peerEntityContext != null) {
    final SAMLEndpointContext endpointContext=peerEntityContext.getSubcontext(SAMLEndpointContext.class,true);
    if (endpointContext != null) {
      final Endpoint endpoint=assertionConsumerServices.get(0);
      logger.debug("Configured peer entity endpoint to be {} with binding {}",endpoint.getLocation(),endpoint.getBinding());
      endpointContext.setEndpoint(assertionConsumerServices.get(0));
    }
  }
}
