{
  final ServiceTicket serviceTicket=new ServiceTicketImpl(id,this,service,this.getCountOfUses() == 0 || credentialsProvided,expirationPolicy);
  updateServiceAndTrackSession(serviceTicket.getId(),service,onlyTrackMostRecentSession);
  return serviceTicket;
}
