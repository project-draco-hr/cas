{
  final MockRequestContext ctx=new MockRequestContext();
  final AuthenticationContext ctxAuthN=getAuthenticationContext(org.jasig.cas.authentication.TestUtils.getCredentialsWithSameUsernameAndPassword());
  final TicketGrantingTicket tgt=this.getCentralAuthenticationService().createTicketGrantingTicket(ctxAuthN);
  WebUtils.putTicketGrantingTicketInScopes(ctx,tgt);
  final TicketGrantingTicketCheckAction action=new TicketGrantingTicketCheckAction(this.getCentralAuthenticationService());
  final Event event=action.doExecute(ctx);
  assertEquals(event.getId(),TicketGrantingTicketCheckAction.VALID);
}
