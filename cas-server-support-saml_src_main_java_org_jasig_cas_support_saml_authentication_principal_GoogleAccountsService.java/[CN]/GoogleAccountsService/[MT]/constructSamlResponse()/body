{
  String samlResponse=TEMPLATE_SAML_RESPONSE;
  final Calendar c=Calendar.getInstance();
  c.setTime(new Date());
  c.add(Calendar.YEAR,1);
  final String userId=getPrincipal().getId();
  final String currentDateTime=new ISOStandardDateFormat().getCurrentDateAndTime();
  samlResponse=samlResponse.replace("<USERNAME_STRING>",userId);
  samlResponse=samlResponse.replace("<RESPONSE_ID>",createID());
  samlResponse=samlResponse.replace("<ISSUE_INSTANT>",currentDateTime);
  samlResponse=samlResponse.replace("<AUTHN_INSTANT>",currentDateTime);
  samlResponse=samlResponse.replaceAll("<NOT_ON_OR_AFTER>",currentDateTime);
  samlResponse=samlResponse.replace("<ASSERTION_ID>",createID());
  samlResponse=samlResponse.replaceAll("<ACS_URL>",getId());
  samlResponse=samlResponse.replace("<REQUEST_ID>",this.requestId);
  return samlResponse;
}
