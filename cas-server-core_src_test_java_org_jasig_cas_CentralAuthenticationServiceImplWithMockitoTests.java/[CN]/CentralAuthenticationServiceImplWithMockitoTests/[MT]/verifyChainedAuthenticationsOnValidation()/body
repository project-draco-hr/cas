{
  final Service svc=org.jasig.cas.services.TestUtils.getService(SVC2_ID);
  final ServiceTicket st=this.cas.grantServiceTicket(TGT2_ID,svc,getAuthenticationContext());
  assertNotNull(st);
  final Assertion assertion=this.cas.validateServiceTicket(st.getId(),svc);
  assertNotNull(assertion);
  assertEquals(assertion.getService(),svc);
  assertEquals(assertion.getPrimaryAuthentication().getPrincipal().getId(),PRINCIPAL);
  assertTrue(assertion.getChainedAuthentications().size() == 2);
  for (int i=0; i < assertion.getChainedAuthentications().size(); i++) {
    final Authentication auth=assertion.getChainedAuthentications().get(i);
    assertEquals(auth,authentication);
  }
}
