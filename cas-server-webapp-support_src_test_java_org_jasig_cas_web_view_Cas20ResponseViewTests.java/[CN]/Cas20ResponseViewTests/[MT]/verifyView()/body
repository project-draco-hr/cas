{
  final ModelAndView modelAndView=this.getModelAndViewUponServiceValidationWithSecurePgtUrl();
  final JstlView v=(JstlView)resolver.resolveViewName(modelAndView.getViewName(),Locale.getDefault());
  final MockHttpServletRequest req=new MockHttpServletRequest(new MockServletContext());
  v.setServletContext(req.getServletContext());
  req.setAttribute(RequestContext.WEB_APPLICATION_CONTEXT_ATTRIBUTE,new GenericWebApplicationContext(req.getServletContext()));
  final Cas20ResponseView view=new Cas20ResponseView(v);
  final MockHttpServletResponse resp=new MockHttpServletResponse();
  view.render(modelAndView.getModel(),req,resp);
  assertNotNull(req.getAttribute(Cas20ResponseView.MODEL_ATTRIBUTE_NAME_CHAINED_AUTHENTICATIONS));
  assertNotNull(req.getAttribute(Cas20ResponseView.MODEL_ATTRIBUTE_NAME_PRIMARY_AUTHENTICATION));
  assertNotNull(req.getAttribute(Cas20ResponseView.MODEL_ATTRIBUTE_NAME_PRINCIPAL));
  assertNotNull(req.getAttribute(CasProtocolConstants.VALIDATION_CAS_MODEL_PROXY_GRANTING_TICKET_IOU));
}
