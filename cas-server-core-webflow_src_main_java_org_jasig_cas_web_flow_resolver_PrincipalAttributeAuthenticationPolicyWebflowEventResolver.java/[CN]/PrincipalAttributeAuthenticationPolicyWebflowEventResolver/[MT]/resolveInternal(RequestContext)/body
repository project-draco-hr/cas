{
  final RegisteredService service=WebUtils.getRegisteredService(context);
  final Authentication authentication=WebUtils.getAuthentication(context);
  if (service == null || authentication == null) {
    logger.debug("No service or authentication is available to determine event for principal");
    return null;
  }
  final Principal principal=authentication.getPrincipal();
  if (StringUtils.isBlank(this.attributeName) || StringUtils.isBlank(this.attributeValue)) {
    logger.debug("Attribute name/value to determine event is not configured for {}",principal.getId());
    return null;
  }
  return resolveEventViaPrincipalAttribute(principal,this.attributeName,service,context,Predicates.containsPattern(this.attributeValue));
}
