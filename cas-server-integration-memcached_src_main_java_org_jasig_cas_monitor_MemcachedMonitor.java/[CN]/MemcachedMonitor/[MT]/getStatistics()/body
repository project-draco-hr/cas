{
  final Map<SocketAddress,Map<String,String>> allStats=memcachedClient.getStats();
  final List<CacheStatistics> statsList=new ArrayList<CacheStatistics>();
  for (  final Map.Entry<SocketAddress,Map<String,String>> entry : allStats.entrySet()) {
    final Map<String,String> statsMap=entry.getValue();
    if (statsMap.size() > 0) {
      final long size=Long.parseLong(statsMap.get("bytes"));
      final long capacity=Long.parseLong(statsMap.get("limit_maxbytes"));
      final long evictions=Long.parseLong(statsMap.get("evictions"));
      String name;
      if (entry.getKey() instanceof InetSocketAddress) {
        name=((InetSocketAddress)entry.getKey()).getHostName();
      }
 else {
        name=entry.getKey().toString();
      }
      statsList.add(new SimpleCacheStatistics(size,capacity,evictions,name));
    }
  }
  return statsList.toArray(new CacheStatistics[statsList.size()]);
}
