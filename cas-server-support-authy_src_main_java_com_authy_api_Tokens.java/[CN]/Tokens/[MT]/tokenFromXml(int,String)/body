{
  Token token=new Token();
  try {
    Error error=errorFromXml(status,content);
    if (error != null) {
      token.setError(error);
      token.setStatus(status);
      return token;
    }
    JAXBContext context=JAXBContext.newInstance(Hash.class);
    Unmarshaller unmarshaller=context.createUnmarshaller();
    StringReader xml=new StringReader(content);
    Hash hash=(Hash)unmarshaller.unmarshal(new StreamSource(xml));
    token=new Token(status,content);
    token.setValid(token.isOk() && hash.getToken().equals(VALID_TOKEN_MESSAGE));
  }
 catch (  JAXBException e) {
    logger.error(e.getMessage(),e);
  }
  return token;
}
