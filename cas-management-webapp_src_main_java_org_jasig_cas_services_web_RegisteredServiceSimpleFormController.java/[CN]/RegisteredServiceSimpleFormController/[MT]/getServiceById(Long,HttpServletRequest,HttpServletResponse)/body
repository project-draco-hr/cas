{
  try {
    final RegisteredService service=this.servicesManager.findServiceBy(id);
    if (service == null) {
      logger.warn("Invalid service id specified [{}]. Cannot find service in the registry",id);
      throw new IllegalArgumentException("Service id cannot be found");
    }
    final RegisteredServiceEditBean bean=RegisteredServiceEditBean.fromRegisteredService(service);
    final List<String> possibleAttributeNames=new ArrayList<>();
    possibleAttributeNames.addAll(this.personAttributeDao.getPossibleUserAttributeNames());
    Collections.sort(possibleAttributeNames);
    bean.setAvailableAttributes(possibleAttributeNames);
    final List<String> possibleUsernameAttributeNames=new ArrayList<>();
    possibleUsernameAttributeNames.addAll(possibleAttributeNames);
    bean.setAvailableUsernameAttributes(possibleUsernameAttributeNames);
    JsonViewUtils.render(bean,response);
  }
 catch (  final Exception e) {
    throw new RuntimeException(e);
  }
}
