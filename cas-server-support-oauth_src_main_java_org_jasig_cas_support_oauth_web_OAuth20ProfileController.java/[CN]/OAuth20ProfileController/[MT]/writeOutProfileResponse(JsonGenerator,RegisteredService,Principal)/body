{
  jsonGenerator.writeStartObject();
  jsonGenerator.writeStringField(ID,principal.getId());
  jsonGenerator.writeArrayFieldStart(ATTRIBUTES);
  final Map<String,Object> attributes=service.getAttributeReleasePolicy().getAttributes(principal);
  for (  final Map.Entry<String,Object> entry : attributes.entrySet()) {
    jsonGenerator.writeStartObject();
    jsonGenerator.writeObjectField(entry.getKey(),entry.getValue());
    jsonGenerator.writeEndObject();
  }
  jsonGenerator.writeEndArray();
  jsonGenerator.writeEndObject();
}
