{
  try (final PrintStream out=new PrintStream(socket.getOutputStream());final InputStream in=socket.getInputStream()){
    logger.debug("Created socket IO streams...");
    binding.setVariable(OUT_KEY,out);
    logger.debug("Added output stream to binding collection as {}",OUT_KEY);
    final GroovyClassLoader loader=new GroovyClassLoader(this.getContextClassLoader());
    final IO io=new IO(in,out,out);
    final Groovysh gsh=new Groovysh(loader,binding,io);
    try {
      logger.debug("Launching groovy interactive shell");
      gsh.run("");
    }
 catch (    final Exception e) {
      logger.error(e.getMessage(),e);
    }
  }
 catch (  final Exception e) {
    logger.error(e.getMessage(),e);
  }
 finally {
    if (socket != null) {
      IOUtils.closeQuietly(this.socket);
    }
  }
}
