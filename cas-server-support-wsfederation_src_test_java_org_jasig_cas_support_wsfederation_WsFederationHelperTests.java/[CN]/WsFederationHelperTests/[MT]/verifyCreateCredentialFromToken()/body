{
  final String wresult=testTokens.get("goodToken");
  final Assertion assertion=wsFederationHelper.parseTokenFromString(wresult);
  final WsFederationCredential expResult=new WsFederationCredential();
  expResult.setIssuedOn(new DateTime("2014-02-26T22:51:16.504Z").withZone(DateTimeZone.UTC));
  expResult.setNotBefore(new DateTime("2014-02-26T22:51:16.474Z").withZone(DateTimeZone.UTC));
  expResult.setNotOnOrAfter(new DateTime("2014-02-26T23:51:16.474Z").withZone(DateTimeZone.UTC));
  expResult.setIssuer("http://adfs.example.com/adfs/services/trust");
  expResult.setAudience("urn:federation:cas");
  expResult.setId("_6257b2bf-7361-4081-ae1f-ec58d4310f61");
  final WsFederationCredential result=wsFederationHelper.createCredentialFromToken(assertion);
  assertNotNull("testCreateCredentialFromToken() - Not Null",result);
  assertEquals("testCreateCredentialFromToken() - IssuedOn",expResult.getIssuedOn(),result.getIssuedOn());
  assertEquals("testCreateCredentialFromToken() - NotBefore",expResult.getNotBefore(),result.getNotBefore());
  assertEquals("testCreateCredentialFromToken() - NotOnOrAfter",expResult.getNotOnOrAfter(),result.getNotOnOrAfter());
  assertEquals("testCreateCredentialFromToken() - Issuer",expResult.getIssuer(),result.getIssuer());
  assertEquals("testCreateCredentialFromToken() - Audience",expResult.getAudience(),result.getAudience());
  assertEquals("testCreateCredentialFromToken() - Id",expResult.getId(),result.getId());
}
