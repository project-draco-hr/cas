{
  CommonHelper.assertNotNull("authenticator",this.authenticator);
  CommonHelper.assertNotNull("profileCreator",this.profileCreator);
  final Credentials credentials=convertToPac4jCredentials(credential);
  logger.debug("credentials: {}",credentials);
  try {
    authenticator.validate(credentials);
  }
 catch (  final CredentialsException e) {
    logger.error("Failed to validate credentials",e);
    throw new FailedLoginException("Failed to validate credentials: " + e.getMessage());
  }
  final UserProfile profile=profileCreator.create(credentials);
  logger.debug("profile: {}",profile);
  return createResult(new ClientCredential(credentials),profile);
}
