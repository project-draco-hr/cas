{
  final ModelAndView modelAndView=new ModelAndView(MONITORING_VIEW_STATISTICS);
  modelAndView.addObject("startTime",this.upTimeStartDate);
  final double difference=this.upTimeStartDate.until(ZonedDateTime.now(ZoneOffset.UTC),ChronoUnit.MILLIS);
  modelAndView.addObject("upTime",calculateUptime(difference,new LinkedList<Integer>(Arrays.asList(NUMBER_OF_MILLISECONDS_IN_A_DAY,NUMBER_OF_MILLISECONDS_IN_AN_HOUR,NUMBER_OF_MILLISECONDS_IN_A_MINUTE,NUMBER_OF_MILLISECONDS_IN_A_SECOND,1)),new LinkedList<String>(Arrays.asList("day","hour","minute","second","millisecond"))));
  modelAndView.addObject("totalMemory",convertToMegaBytes(Runtime.getRuntime().totalMemory()));
  modelAndView.addObject("maxMemory",convertToMegaBytes(Runtime.getRuntime().maxMemory()));
  modelAndView.addObject("freeMemory",convertToMegaBytes(Runtime.getRuntime().freeMemory()));
  modelAndView.addObject("availableProcessors",Runtime.getRuntime().availableProcessors());
  modelAndView.addObject("serverHostName",httpServletRequest.getServerName());
  modelAndView.addObject("serverIpAddress",httpServletRequest.getLocalAddr());
  modelAndView.addObject("casTicketSuffix",this.casTicketSuffix);
  int unexpiredTgts=0;
  int unexpiredSts=0;
  int expiredTgts=0;
  int expiredSts=0;
  try {
    final Collection<Ticket> tickets=this.centralAuthenticationService.getTickets(Predicates.<Ticket>alwaysTrue());
    for (    final Ticket ticket : tickets) {
      if (ticket instanceof ServiceTicket) {
        if (ticket.isExpired()) {
          expiredSts++;
        }
 else {
          unexpiredSts++;
        }
      }
 else {
        if (ticket.isExpired()) {
          expiredTgts++;
        }
 else {
          unexpiredTgts++;
        }
      }
    }
  }
 catch (  final UnsupportedOperationException e) {
    logger.trace("The ticket registry doesn't support this information.");
  }
  modelAndView.addObject("unexpiredTgts",unexpiredTgts);
  modelAndView.addObject("unexpiredSts",unexpiredSts);
  modelAndView.addObject("expiredTgts",expiredTgts);
  modelAndView.addObject("expiredSts",expiredSts);
  modelAndView.addObject("pageTitle",modelAndView.getViewName());
  return modelAndView;
}
