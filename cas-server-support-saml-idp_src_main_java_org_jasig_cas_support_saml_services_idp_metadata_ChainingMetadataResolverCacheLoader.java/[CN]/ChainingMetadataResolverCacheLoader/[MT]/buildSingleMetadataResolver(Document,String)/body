{
  final OpenSamlConfigBean configBean=ApplicationContextProvider.getApplicationContext().getBean(OpenSamlConfigBean.class);
  final List<MetadataResolver> resolvers=new ArrayList<>();
  final Element metadataRoot=document.getDocumentElement();
  final DOMMetadataResolver metadataProvider=new DOMMetadataResolver(metadataRoot);
  metadataProvider.setParserPool(configBean.getParserPool());
  metadataProvider.setFailFastInitialization(true);
  metadataProvider.setRequireValidMetadata(true);
  metadataProvider.setId(metadataProvider.getClass().getCanonicalName());
  LOGGER.debug("Initializing metadata resolver from [{}]",key);
  try {
    metadataProvider.initialize();
    resolvers.add(metadataProvider);
    return resolvers;
  }
 catch (  final ComponentInitializationException ex) {
    throw new RuntimeException("Could not initialize metadata resolver. Resource will be ignored",ex);
  }
}
