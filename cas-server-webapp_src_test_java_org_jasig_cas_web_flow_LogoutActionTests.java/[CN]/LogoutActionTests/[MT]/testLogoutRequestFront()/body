{
  final Cookie cookie=new Cookie(COOKIE_TGC_ID,"test");
  this.request.setCookies(new Cookie[]{cookie});
  final CentralAuthenticationService centralAuthenticationService=mock(CentralAuthenticationService.class);
  final LogoutRequest logoutRequest=new LogoutRequest("",null);
  when(centralAuthenticationService.destroyTicketGrantingTicket("test")).thenReturn(Arrays.asList(logoutRequest));
  this.logoutAction.setCentralAuthenticationService(centralAuthenticationService);
  final Event event=this.logoutAction.doExecute(this.requestContext);
  assertEquals(LogoutAction.FRONT_EVENT,event.getId());
  Iterator<LogoutRequest> logoutRequests=(Iterator<LogoutRequest>)this.requestContext.getFlowScope().get(LogoutAction.LOGOUT_REQUESTS);
  assertTrue(logoutRequests.hasNext());
  assertEquals(logoutRequest,logoutRequests.next());
}
