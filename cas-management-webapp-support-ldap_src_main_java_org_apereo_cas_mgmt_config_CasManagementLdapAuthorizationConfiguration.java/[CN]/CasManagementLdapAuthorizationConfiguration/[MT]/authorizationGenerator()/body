{
  final ConnectionFactory connectionFactory=Beans.newPooledConnectionFactory(casProperties.getLdapAuthz());
  final LdapAuthorizationGenerator gen=new LdapAuthorizationGenerator(connectionFactory,ldapAuthorizationGeneratorUserSearchExecutor());
  gen.setAllowMultipleResults(casProperties.getLdapAuthz().isAllowMultipleResults());
  gen.setRoleAttribute(casProperties.getLdapAuthz().getRoleAttribute());
  gen.setRolePrefix(casProperties.getLdapAuthz().getRolePrefix());
  return gen;
}
