{
  final AbstractRegisteredService rs=new RegexRegisteredService();
  rs.setName("Service Name Regex");
  rs.setProxyPolicy(new RefuseRegisteredServiceProxyPolicy());
  rs.setUsernameAttributeProvider(new AnonymousRegisteredServiceUsernameAttributeProvider(new ShibbolethCompatiblePersistentIdGenerator("hello")));
  rs.setDescription("Service description");
  rs.setServiceId("^http?://.+");
  rs.setTheme("the theme name");
  rs.setEvaluationOrder(123);
  rs.setDescription("Here is another description");
  rs.setRequiredHandlers(new HashSet<String>(Arrays.asList("handler1","handler2")));
  return rs;
}
