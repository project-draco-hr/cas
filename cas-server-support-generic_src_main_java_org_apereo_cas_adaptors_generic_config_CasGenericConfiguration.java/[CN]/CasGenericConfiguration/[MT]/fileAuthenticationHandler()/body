{
  final FileAuthenticationHandler h=new FileAuthenticationHandler();
  h.setFileName(casProperties.getAuthn().getFile().getFilename());
  h.setSeparator(casProperties.getAuthn().getFile().getSeparator());
  h.setPrincipalFactory(filePrincipalFactory());
  h.setServicesManager(servicesManager);
  if (filePasswordEncoder != null) {
    h.setPasswordEncoder(filePasswordEncoder);
  }
  if (filePasswordPolicyConfiguration != null) {
    h.setPasswordPolicyConfiguration(filePasswordPolicyConfiguration);
  }
  if (filePrincipalNameTransformer != null) {
    h.setPrincipalNameTransformer(filePrincipalNameTransformer);
  }
  return h;
}
