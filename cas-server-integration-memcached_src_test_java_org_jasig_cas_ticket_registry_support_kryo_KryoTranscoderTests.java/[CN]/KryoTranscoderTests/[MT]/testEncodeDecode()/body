{
  final ServiceTicket expectedST=new MockServiceTicket(ST_ID);
  assertEquals(expectedST,transcoder.decode(transcoder.encode(expectedST)));
  final Credential userPassCredential=new UsernamePasswordCredential("handymanbob","foo");
  final TicketGrantingTicket expectedTGT=new MockTicketGrantingTicket(TGT_ID,userPassCredential);
  expectedTGT.grantServiceTicket(ST_ID,null,null,false);
  assertEquals(expectedTGT,transcoder.decode(transcoder.encode(expectedTGT)));
  internalProxyTest("http://localhost");
  internalProxyTest("https://localhost:8080/path/file.html?p1=v1&p2=v2#fragment");
}
