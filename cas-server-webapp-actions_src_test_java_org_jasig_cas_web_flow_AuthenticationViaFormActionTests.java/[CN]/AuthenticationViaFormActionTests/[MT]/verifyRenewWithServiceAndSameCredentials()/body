{
  final Credential c=org.jasig.cas.authentication.TestUtils.getCredentialsWithSameUsernameAndPassword();
  getAuthenticationTransactionManager().authenticate(c);
  final AuthenticationContext ctx=this.getAuthenticationTransactionManager().build();
  final TicketGrantingTicket ticketGrantingTicket=getCentralAuthenticationService().createTicketGrantingTicket(ctx);
  final MockHttpServletRequest request=new MockHttpServletRequest();
  final MockRequestContext context=new MockRequestContext();
  WebUtils.putTicketGrantingTicketInScopes(context,ticketGrantingTicket);
  WebUtils.putLoginTicket(context,"LOGIN");
  request.addParameter("lt","LOGIN");
  request.addParameter("renew","true");
  request.addParameter("service",TestUtils.CONST_TEST_URL);
  request.addParameter("username","test");
  request.addParameter("password","test");
  context.setExternalContext(new ServletExternalContext(new MockServletContext(),request,new MockHttpServletResponse()));
  context.getFlowScope().put("service",org.jasig.cas.services.TestUtils.getService());
  final MessageContext messageContext=mock(MessageContext.class);
  assertEquals("warn",this.action.submit(context,c,messageContext).getId());
}
