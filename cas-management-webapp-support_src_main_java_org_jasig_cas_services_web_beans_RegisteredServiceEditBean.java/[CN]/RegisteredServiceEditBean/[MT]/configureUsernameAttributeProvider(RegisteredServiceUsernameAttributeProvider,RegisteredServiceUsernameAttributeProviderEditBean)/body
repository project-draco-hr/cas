{
  if (provider instanceof DefaultRegisteredServiceUsernameProvider) {
    uBean.setType(RegisteredServiceUsernameAttributeProviderEditBean.Types.DEFAULT.toString());
  }
 else   if (provider instanceof AnonymousRegisteredServiceUsernameAttributeProvider) {
    final AnonymousRegisteredServiceUsernameAttributeProvider anonymous=(AnonymousRegisteredServiceUsernameAttributeProvider)provider;
    uBean.setType(RegisteredServiceUsernameAttributeProviderEditBean.Types.ANONYMOUS.toString());
    final PersistentIdGenerator generator=anonymous.getPersistentIdGenerator();
    if (generator instanceof ShibbolethCompatiblePersistentIdGenerator) {
      final ShibbolethCompatiblePersistentIdGenerator sh=(ShibbolethCompatiblePersistentIdGenerator)generator;
      String salt=new String(sh.getSalt(),Charset.defaultCharset());
      if (Base64.isBase64(salt)) {
        salt=new String(Base64.decodeBase64(salt));
      }
      uBean.setValue(salt);
    }
  }
 else   if (provider instanceof PrincipalAttributeRegisteredServiceUsernameProvider) {
    final PrincipalAttributeRegisteredServiceUsernameProvider p=(PrincipalAttributeRegisteredServiceUsernameProvider)provider;
    uBean.setType(RegisteredServiceUsernameAttributeProviderEditBean.Types.ATTRIBUTE.toString());
    uBean.setValue(p.getUsernameAttribute());
  }
}
