{
  try {
    Pattern.compile(serviceId);
    LOGGER.debug("Service id {} is a valid regex.",serviceId);
    return new RegexRegisteredService();
  }
 catch (  final PatternSyntaxException exception) {
    LOGGER.debug("Service id {} is not a valid regex. Checking ant patterns...",serviceId);
    if (new AntPathMatcher().isPattern(serviceId)) {
      LOGGER.debug("Service id {} is a valid ant pattern.",serviceId);
      return new RegisteredServiceImpl();
    }
  }
  throw new RuntimeException("Service id " + serviceId + " cannot be resolve to a service type");
}
