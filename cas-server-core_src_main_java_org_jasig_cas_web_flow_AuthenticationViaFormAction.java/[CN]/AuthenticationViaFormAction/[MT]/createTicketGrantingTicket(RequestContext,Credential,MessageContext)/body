{
  try {
    final String tgtId=this.centralAuthenticationService.createTicketGrantingTicket(credential);
    WebUtils.putTicketGrantingTicketInFlowScope(context,tgtId);
    putWarnCookieIfRequestParameterPresent(context);
    if (addWarningMessagesToMessageContextIfNeeded(tgtId,messageContext)) {
      return newEvent(SUCCESS_WITH_WARNINGS);
    }
    return newEvent(SUCCESS);
  }
 catch (  final AuthenticationException e) {
    return newEvent(AUTHENTICATION_FAILURE,e);
  }
catch (  final Exception e) {
    return newEvent(ERROR,e);
  }
}
