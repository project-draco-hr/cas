{
  final TicketGrantingTicket newTgt=newTGT();
  addTicketInTransaction(newTgt);
  final TicketGrantingTicket tgtFromDb=(TicketGrantingTicket)getTicketInTransaction(newTgt.getId());
  assertNotNull(tgtFromDb);
  assertEquals(newTgt.getId(),tgtFromDb.getId());
  final ServiceTicket newSt=grantServiceTicketInTransaction(tgtFromDb);
  final ServiceTicket stFromDb=(ServiceTicket)getTicketInTransaction(newSt.getId());
  assertNotNull(stFromDb);
  assertEquals(newSt.getId(),stFromDb.getId());
  deleteTicketInTransaction(newTgt.getId());
  assertNull(getTicketInTransaction(newTgt.getId()));
  assertNull(getTicketInTransaction(newSt.getId()));
}
