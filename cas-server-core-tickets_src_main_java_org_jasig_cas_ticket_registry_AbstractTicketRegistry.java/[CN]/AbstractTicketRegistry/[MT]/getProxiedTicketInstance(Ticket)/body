{
  if (ticket == null) {
    return null;
  }
  if (ticket instanceof AccessToken) {
    return new AccessTokenDelegator<>(this,(AccessToken)ticket,needsCallback());
  }
  if (ticket instanceof OAuthCode) {
    return new OAuthCodeDelegator<>(this,(OAuthCode)ticket,needsCallback());
  }
  if (ticket instanceof ProxyGrantingTicket) {
    return new ProxyGrantingTicketDelegator(this,(ProxyGrantingTicket)ticket,needsCallback());
  }
  if (ticket instanceof TicketGrantingTicket) {
    return new TicketGrantingTicketDelegator<>(this,(TicketGrantingTicket)ticket,needsCallback());
  }
  if (ticket instanceof ProxyTicket) {
    return new ProxyTicketDelegator(this,(ProxyTicket)ticket,needsCallback());
  }
  if (ticket instanceof ServiceTicket) {
    return new ServiceTicketDelegator<>(this,(ServiceTicket)ticket,needsCallback());
  }
  throw new IllegalStateException("Cannot wrap ticket of type: " + ticket.getClass() + " with a proxy delegator");
}
