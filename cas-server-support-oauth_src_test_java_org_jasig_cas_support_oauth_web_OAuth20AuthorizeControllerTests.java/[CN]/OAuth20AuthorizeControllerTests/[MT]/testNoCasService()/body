{
  final MockHttpServletRequest mockRequest=new MockHttpServletRequest("GET",CONTEXT + OAuthConstants.AUTHORIZE_URL);
  mockRequest.setParameter(OAuthConstants.CLIENT_ID,CLIENT_ID);
  mockRequest.setParameter(OAuthConstants.REDIRECT_URI,REDIRECT_URI);
  final MockHttpServletResponse mockResponse=new MockHttpServletResponse();
  final ServicesManager servicesManager=mock(ServicesManager.class);
  when(servicesManager.getAllServices()).thenReturn(new ArrayList<RegisteredService>());
  final OAuth20WrapperController oauth20WrapperController=new OAuth20WrapperController();
  oauth20WrapperController.setServicesManager(servicesManager);
  oauth20WrapperController.afterPropertiesSet();
  final Logger logger=mock(Logger.class);
  OAuth20AuthorizeController.setLogger(logger);
  final ModelAndView modelAndView=oauth20WrapperController.handleRequest(mockRequest,mockResponse);
  assertEquals(OAuthConstants.ERROR_VIEW,modelAndView.getViewName());
  verify(logger).error("Unknown clientId : {}",CLIENT_ID);
}
