{
  try (final InputStream in=new ByteArrayInputStream(wresult.getBytes("UTF-8"))){
    final Document document=configBean.getParserPool().parse(in);
    final Element metadataRoot=document.getDocumentElement();
    final UnmarshallerFactory unmarshallerFactory=configBean.getUnmarshallerFactory();
    final Unmarshaller unmarshaller=unmarshallerFactory.getUnmarshaller(metadataRoot);
    if (unmarshaller == null) {
      throw new IllegalArgumentException("Unmarshaller for the metadata root element cannot be determined");
    }
    final RequestSecurityTokenResponse rsToken=(RequestSecurityTokenResponse)unmarshaller.unmarshall(metadataRoot);
    final List<RequestedSecurityToken> rst=rsToken.getRequestedSecurityToken();
    final Assertion assertion=(Assertion)rst.get(0).getSecurityTokens().get(0);
    if (assertion == null) {
      LOGGER.debug("parseTokenFromString: assertion null");
    }
 else {
      LOGGER.debug("parseTokenFromString: {}",assertion);
    }
    return assertion;
  }
 catch (  final Exception ex) {
    LOGGER.warn(ex.getMessage());
    return null;
  }
}
