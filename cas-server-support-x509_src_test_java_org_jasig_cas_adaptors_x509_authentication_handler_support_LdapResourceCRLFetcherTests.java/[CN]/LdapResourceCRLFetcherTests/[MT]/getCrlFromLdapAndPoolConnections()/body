{
  CacheManager.getInstance().removeAllCaches();
  final Cache cache=new Cache("crlCache-1",100,false,false,20,10);
  CacheManager.getInstance().addCache(cache);
  final LdapResourceCRLFetcher fetcher=new LdapResourceCRLFetcher(this.searchRequest,this.connectionConfig);
  fetcher.setProvider(this.provider);
  fetcher.setConnectionPool(this.connectionPool);
  final CRLDistributionPointRevocationChecker checker=new CRLDistributionPointRevocationChecker(cache,fetcher);
  checker.setThrowOnFetchFailure(true);
  checker.setUnavailableCRLPolicy(new AllowRevocationPolicy());
  for (int i=0; i < 10; i++) {
    final X509Certificate cert=CertUtils.readCertificate(new ClassPathResource("ldap-crl.crt"));
    checker.check(cert);
  }
}
