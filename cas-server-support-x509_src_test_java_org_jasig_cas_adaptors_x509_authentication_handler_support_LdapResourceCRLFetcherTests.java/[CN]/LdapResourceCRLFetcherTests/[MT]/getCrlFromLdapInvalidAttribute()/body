{
  CacheManager.getInstance().removeAllCaches();
  final Cache cache=new Cache("crlCache-1",100,false,false,20,10);
  CacheManager.getInstance().addCache(cache);
  final LdapResourceCRLFetcher fetcher=new LdapResourceCRLFetcher(this.searchRequest,this.connectionConfig,"mail");
  fetcher.setProvider(this.provider);
  final CRLDistributionPointRevocationChecker checker=new CRLDistributionPointRevocationChecker(cache,fetcher);
  checker.setThrowOnFetchFailure(true);
  checker.setUnavailableCRLPolicy(new AllowRevocationPolicy());
  final X509Certificate cert=CertUtils.readCertificate(new ClassPathResource("ldap-crl.crt"));
  checker.check(cert);
}
