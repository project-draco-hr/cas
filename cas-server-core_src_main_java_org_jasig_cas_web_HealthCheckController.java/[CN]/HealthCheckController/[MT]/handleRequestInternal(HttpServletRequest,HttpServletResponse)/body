{
  final HealthStatus healthStatus=this.healthCheckMonitor.observe();
  final StringBuilder sb=new StringBuilder();
  sb.append("Health: ").append(healthStatus.getCode());
  String name;
  Status status;
  int i=0;
  for (  final Map.Entry<String,Status> entry : healthStatus.getDetails().entrySet()) {
    name=entry.getKey();
    status=entry.getValue();
    response.addHeader("X-CAS-" + name,String.format("%s;%s",status.getCode(),status.getDescription()));
    sb.append("\n\n\t").append(++i).append('.').append(name).append(": ");
    sb.append(status.getCode());
    if (status.getDescription() != null) {
      sb.append(" - ").append(status.getDescription());
    }
  }
  response.setStatus(healthStatus.getCode().value());
  response.setContentType("text/plain");
  response.getOutputStream().write(sb.toString().getBytes(response.getCharacterEncoding()));
  return null;
}
