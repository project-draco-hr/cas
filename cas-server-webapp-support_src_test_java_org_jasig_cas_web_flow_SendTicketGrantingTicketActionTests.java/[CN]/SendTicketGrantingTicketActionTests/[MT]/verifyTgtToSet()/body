{
  final MockHttpServletResponse response=new MockHttpServletResponse();
  final TicketGrantingTicket tgt=mock(TicketGrantingTicket.class);
  when(tgt.getId()).thenReturn("test");
  WebUtils.putTicketGrantingTicketInScopes(this.context,tgt);
  this.context.setExternalContext(new ServletExternalContext(new MockServletContext(),new MockHttpServletRequest(),response));
  assertEquals("success",this.action.execute(this.context).getId());
  assertEquals(tgt.getId(),response.getCookies()[0].getValue());
}
