{
  String callbackUrl=serverLoginUrl;
  List<Client> allClients=new ArrayList<>();
  if (clients != null) {
    final String clientsCallbackUrl=clients.getCallbackUrl();
    if (StringUtils.isNotBlank(clientsCallbackUrl)) {
      callbackUrl=clientsCallbackUrl;
    }
    allClients=clients.findAllClients();
  }
  autoCreateFacebookClient(allClients);
  autoCreateTwitterClient(allClients);
  autoCreateSaml2Client(allClients);
  if (allClients == null || allClients.size() == 0) {
    throw new IllegalArgumentException("At least one pac4j client must be defined");
  }
  return new Clients(callbackUrl,allClients);
}
