{
  final HttpServletRequest request=WebUtils.getHttpServletRequest(context);
  final HttpServletResponse response=WebUtils.getHttpServletResponse(context);
  final HttpSession session=request.getSession();
  final WebContext webContext=new J2EContext(request,response);
  final Service service=(Service)context.getFlowScope().get(SERVICE);
  if (service != null) {
    session.setAttribute(SERVICE,service);
  }
  saveRequestParameter(request,session,THEME);
  saveRequestParameter(request,session,LOCALE);
  saveRequestParameter(request,session,METHOD);
  for (  final Client client : this.clients.findAllClients()) {
    final String key=client.getName() + "Url";
    final String redirectionUrl=client.getRedirectionUrl(webContext);
    logger.debug("{} -> {}",key,redirectionUrl);
    context.getFlowScope().put(key,redirectionUrl);
  }
}
