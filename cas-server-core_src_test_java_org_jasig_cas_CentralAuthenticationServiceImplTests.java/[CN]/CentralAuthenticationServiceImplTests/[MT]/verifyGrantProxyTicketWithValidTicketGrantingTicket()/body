{
  final TicketGrantingTicket ticketId=getCentralAuthenticationService().createTicketGrantingTicket(TestUtils.getCredentialsWithSameUsernameAndPassword());
  final ServiceTicket serviceTicketId=getCentralAuthenticationService().grantServiceTicket(ticketId.getId(),getService());
  final TicketGrantingTicket pgt=getCentralAuthenticationService().createProxyGrantingTicket(serviceTicketId.getId(),org.jasig.cas.services.TestUtils.getHttpBasedServiceCredentials());
  final ProxyTicket pt=getCentralAuthenticationService().grantProxyTicket(pgt.getId(),getService());
  assertTrue(pt.getId().startsWith(ProxyTicket.PROXY_TICKET_PREFIX));
}
