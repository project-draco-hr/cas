{
  final CentralAuthenticationService cas=getCentralAuthenticationService();
  final Service svc=TestUtils.getService("testDefault");
  final UsernamePasswordCredential goodCredential=TestUtils.getCredentialsWithSameUsernameAndPassword();
  final String tgtId=cas.createTicketGrantingTicket(goodCredential);
  cas.grantServiceTicket(tgtId,svc);
  final String st2Id=cas.grantServiceTicket(tgtId,svc,goodCredential);
  final Assertion assertion=cas.validateServiceTicket(st2Id,svc);
  final ValidationSpecification validationSpecification=new Cas20WithoutProxyingValidationSpecification();
  assertTrue(validationSpecification.isSatisfiedBy(assertion));
}
