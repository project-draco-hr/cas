{
  final CentralAuthenticationService cas=getCentralAuthenticationService();
  final Service svc=getService("testDefault");
  final UsernamePasswordCredential goodCredential=TestUtils.getCredentialsWithSameUsernameAndPassword();
  final TicketGrantingTicket tgtId=cas.createTicketGrantingTicket(goodCredential);
  cas.grantServiceTicket(tgtId.getId(),svc);
  final ServiceTicket st2Id=cas.grantServiceTicket(tgtId.getId(),svc,goodCredential);
  final Assertion assertion=cas.validateServiceTicket(st2Id.getId(),svc);
  final ValidationSpecification validationSpecification=new Cas20WithoutProxyingValidationSpecification();
  assertTrue(validationSpecification.isSatisfiedBy(assertion));
}
