{
  PasswordCredential cred=TestUtils.getCredentialsWithSameUsernameAndPassword();
  final String ticketGrantingTicket=getCentralAuthenticationService().createTicketGrantingTicket(cred);
  final String serviceTicket=getCentralAuthenticationService().grantServiceTicket(ticketGrantingTicket,TestUtils.getService());
  final Assertion assertion=getCentralAuthenticationService().validateServiceTicket(serviceTicket,TestUtils.getService());
  final Authentication auth=assertion.getPrimaryAuthentication();
  assertEquals(auth.getPrincipal().getId(),cred.getUsername());
}
