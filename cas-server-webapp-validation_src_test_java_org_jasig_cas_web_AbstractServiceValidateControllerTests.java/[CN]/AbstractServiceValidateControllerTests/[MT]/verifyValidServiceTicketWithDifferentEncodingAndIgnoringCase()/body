{
  getAuthenticationTransactionManager().processAuthenticationAttempt(org.jasig.cas.authentication.TestUtils.getCredentialsWithSameUsernameAndPassword());
  final AuthenticationContext ctx=getAuthenticationTransactionManager().build();
  this.serviceValidateController.setProxyHandler(new Cas10ProxyHandler());
  final TicketGrantingTicket tId=getCentralAuthenticationService().createTicketGrantingTicket(ctx);
  final String origSvc="http://www.jasig.org?param=hello+world";
  final ServiceTicket sId=getCentralAuthenticationService().grantServiceTicket(tId.getId(),org.jasig.cas.authentication.TestUtils.getService(origSvc),ctx);
  final String reqSvc="http://WWW.JASIG.ORG?PARAM=hello%20world";
  final MockHttpServletRequest request=new MockHttpServletRequest();
  request.addParameter("service",org.jasig.cas.authentication.TestUtils.getService(reqSvc).getId());
  request.addParameter("ticket",sId.getId());
  assertEquals(AbstractServiceValidateController.DEFAULT_SERVICE_SUCCESS_VIEW_NAME,this.serviceValidateController.handleRequestInternal(request,new MockHttpServletResponse()).getViewName());
}
