{
  final Service service=org.jasig.cas.authentication.TestUtils.getService();
  getAuthenticationTransactionManager().authenticate(org.jasig.cas.authentication.TestUtils.getCredentialsWithSameUsernameAndPassword());
  final AuthenticationContext ctx=getAuthenticationTransactionManager().build();
  final TicketGrantingTicket tId=getCentralAuthenticationService().createTicketGrantingTicket(ctx);
  final ServiceTicket sId=getCentralAuthenticationService().grantServiceTicket(tId.getId(),service,ctx);
  final MockHttpServletRequest request=new MockHttpServletRequest();
  request.addParameter("service",service.getId());
  request.addParameter("ticket",sId.getId());
  request.addParameter("pgtUrl","https://www.github.com");
  return this.serviceValidateController.handleRequestInternal(request,new MockHttpServletResponse());
}
