{
  final HttpServletRequest request=WebUtils.getHttpServletRequest(context);
  if (!this.pathPopulated) {
    final String contextPath=context.getExternalContext().getContextPath();
    final String cookiePath=StringUtils.hasText(contextPath) ? contextPath : "/";
    logger.info("Setting path for cookies to: " + cookiePath);
    this.warnCookieGenerator.setCookiePath(cookiePath);
    this.ticketGrantingTicketCookieGenerator.setCookiePath(cookiePath);
    this.pathPopulated=true;
  }
  context.getFlowScope().put("ticketGrantingTicketId",this.ticketGrantingTicketCookieGenerator.retrieveCookieValue(request));
  context.getFlowScope().put("warnCookieValue",Boolean.valueOf(this.warnCookieGenerator.retrieveCookieValue(request)));
  final Service service=WebUtils.getService(this.argumentExtractors,context);
  if (service != null && logger.isDebugEnabled()) {
    logger.debug("Placing service in FlowScope: " + service.getId());
  }
  context.getFlowScope().put("service",service);
  return result("success");
}
