{
  MockPasswordHandler mockHandler=new MockPasswordHandler();
  mockHandler.setSucceed(true);
  this.lphaah.setPasswordHandler(mockHandler);
  LegacyCasCredentials credentials=new LegacyCasCredentials();
  credentials.setUsername("testUser");
  credentials.setPassword("testPassword");
  ServletRequest servletRequest=new MockHttpServletRequest();
  credentials.setServletRequest(servletRequest);
  assertTrue(this.lphaah.authenticate(credentials));
  assertEquals("testUser",mockHandler.getUsername());
  assertEquals("testPassword",mockHandler.getPassword());
  assertSame(servletRequest,mockHandler.getRequest());
}
