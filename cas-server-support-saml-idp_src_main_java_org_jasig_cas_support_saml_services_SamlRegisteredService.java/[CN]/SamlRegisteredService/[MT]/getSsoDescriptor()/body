{
  try {
    final CriteriaSet criterions=new CriteriaSet(new EntityIdCriterion(getServiceId()));
    final EntityDescriptor entityDescriptor=metadataResolver.resolveSingle(criterions);
    if (entityDescriptor == null) {
      throw new SAMLException("Cannot find entity " + getServiceId() + " in metadata provider");
    }
    final List<RoleDescriptor> list=entityDescriptor.getRoleDescriptors(SPSSODescriptor.DEFAULT_ELEMENT_NAME,SAMLConstants.SAML20P_NS);
    final RoleDescriptor roleDescriptor=list != null && !list.isEmpty() ? list.get(0) : null;
    return roleDescriptor;
  }
 catch (  final Exception e) {
    throw new RuntimeException(e.getMessage(),e);
  }
}
