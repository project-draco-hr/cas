{
  CommonHelper.assertNotNull("profileCreator",this.profileCreator);
  final C credentials=convertToPac4jCredentials((I)credential);
  logger.debug("credentials: {}",credentials);
  try {
    final Authenticator authenticator=getAuthenticator(credential);
    CommonHelper.assertNotNull("authenticator",authenticator);
    authenticator.validate(credentials);
  }
 catch (  final CredentialsException e) {
    logger.error("Failed to validate credentials",e);
    throw new FailedLoginException("Failed to validate credentials: " + e.getMessage());
  }
  final UserProfile profile=this.profileCreator.create(credentials);
  logger.debug("profile: {}",profile);
  return createResult(new ClientCredential(credentials),profile);
}
