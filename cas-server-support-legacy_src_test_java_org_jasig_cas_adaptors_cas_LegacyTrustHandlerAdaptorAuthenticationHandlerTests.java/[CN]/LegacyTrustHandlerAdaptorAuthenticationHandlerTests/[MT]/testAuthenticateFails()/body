{
  LegacyCasTrustedCredential trustedCredentials=new LegacyCasTrustedCredential();
  ServletRequest request=new MockHttpServletRequest();
  trustedCredentials.setServletRequest(request);
  MockTrustHandler mockTrustHandler=new MockTrustHandler();
  mockTrustHandler.setUserName(null);
  this.legacyTrustAdaptor.setTrustHandler(mockTrustHandler);
  assertFalse(this.legacyTrustAdaptor.authenticate(trustedCredentials));
  assertSame(request,mockTrustHandler.getRequest());
}
