{
  final Map<String,Object> attributesToRelease=new HashMap<String,Object>(p.getAttributes().size());
  final Map<String,Object> resolvedAttributes=p.getAttributes();
  for (  final Map.Entry<String,String> entry : this.allowedAttributes.entrySet()) {
    final String key=entry.getKey();
    final Object value=resolvedAttributes.get(key);
    if (value != null) {
      final String mappedAttributeName=entry.getValue();
      logger.debug("Found attribute [{}] in the list of allowed attributes, mapped to the name [{}]",key,mappedAttributeName);
      attributesToRelease.put(mappedAttributeName,value);
    }
  }
  return attributesToRelease;
}
