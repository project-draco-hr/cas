{
  final Map<String,Object> attributesToRelease=new HashMap<String,Object>(p.getAttributes().size());
  final Map<String,Object> resolvedAttributes=p.getAttributes();
  for (  final Map.Entry<String,String> entry : this.allowedAttributes.entrySet()) {
    final Object value=resolvedAttributes.get(entry.getKey());
    if (value != null) {
      final String mappedAttributeName=entry.getValue();
      logger.debug("Found attribute [{}] in the list of allowed attributes, mapped to the name [{}]",entry.getKey(),mappedAttributeName);
      attributesToRelease.put(mappedAttributeName,value);
    }
  }
  return attributesToRelease;
}
